    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Lawyer Chat</title>
        <style>
            /* Same CSS as before */
            body { margin: 0; font-family: Arial, sans-serif; height: 100vh; display: flex; }
            .sidebar { width: 25%; background: #f2f2f2; border-right: 1px solid #ccc; overflow-y: auto; }
            .sidebar h2 { text-align: center; padding: 10px; background: #4CAF50; color: white; margin: 0; }
            .client { padding: 15px; border-bottom: 1px solid #ddd; cursor: pointer; text-decoration: none; color: black; display: block; }
            .client:hover, .client.active { background-color: #ddd; }
            .chat { width: 75%; display: flex; flex-direction: column; }
            .messages { flex: 1; padding: 20px; overflow-y: auto; background: #e5ddd5; }
            .message { margin-bottom: 15px; max-width: 70%; padding: 10px; border-radius: 10px; position: relative; }
            .sent { background: #dcf8c6; align-self: flex-end; text-align: right; }
            .received { background: white; align-self: flex-start; text-align: left; }
            .timestamp { font-size: 0.8em; color: gray; margin-top: 5px; }
            .send-message { padding: 10px; background: #f0f0f0; display: flex; gap: 10px; }
            .send-message textarea { flex: 1; resize: none; padding: 10px; border-radius: 10px; border: 1px solid #ccc; }
            .send-message button { padding: 10px 20px; background: #4CAF50; border: none; color: white; border-radius: 10px; cursor: pointer; }
            .send-message button:hover { background: #45a049; }

            /* Video Call Modal */
            .video-call-container {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.8);
                justify-content: center;
                align-items: center;
            }
            .video-call-container video {
                max-width: 70%;
                max-height: 70%;
            }
            .video-call-container button {
                position: absolute;
                top: 20px;
                right: 20px;
                background: red;
                color: white;
                border: none;
                padding: 10px;
                cursor: pointer;
            }
            .video-call-buttons {
                position: absolute;
                bottom: 80px;
                display: flex;
                gap: 20px;
                color: white;
            }
        </style>
    </head>
    <body>

        <!-- Sidebar: List of clients -->
        <div class="sidebar">
            <h2>Clients</h2>
            {% for client in clients %}
                <a href="?client_id={{ client.id.id }}" class="client {% if selected_client and client.id == selected_client.id %}active{% endif %}">
                    {{ client.first_name }} {{ client.last_name }}
                </a>
            {% empty %}
                <p style="padding: 10px;">No clients available.</p>
            {% endfor %}
        </div>

        <!-- Chat Area: Messages between lawyer and selected client -->
        <div class="chat">
            {% if selected_client %}
                <h3 style="padding:10px;">Chat with {{ selected_client.first_name }} {{ selected_client.last_name }}</h3>

                </form>

                <div class="messages">
                    {% for message in messages %}
                        <div class="message {% if message.sender == request.user %}sent{% else %}received{% endif %}">
                            <div>{{ message.message }}</div>
                            <div class="timestamp">{{ message.timestamp|date:"d M Y, h:i A" }}</div>
                        </div>
                    {% empty %}
                        <p>No messages yet.</p>
                    {% endfor %}
                </div>

                <!-- Chat Input -->
                <form method="post" action="{% url 'lawyer:send_message_to_client' client_id=selected_client.id.id %}" class="send-message">
                    {% csrf_token %}
                    <textarea name="message" placeholder="Type your message..." required></textarea>
                    <button type="submit">Send</button>
                </form>

            {% else %}
                <p style="padding: 20px;">Select a client to start chatting.</p>
            {% endif %}
        </div>

        <!-- Video Call Modal (for both lawyer and client) -->
        <!-- <div class="video-call-container" id="video-call-container">
            <video id="local-video" autoplay muted></video>
            <video id="remote-video" autoplay></video>
            <div class="video-call-buttons">
                <button id="end-call-btn">End Call</button>
                <button id="reject-call-btn" style="background: red;">Reject Call</button>
                <button id="accept-call-btn" style="background: green;">Accept Call</button>
            </div>
        </div> -->

        <!-- <script>
            const videoCallContainer = document.getElementById("video-call-container");

            const endCallBtn = document.getElementById("end-call-btn");
            const rejectCallBtn = document.getElementById("reject-call-btn");
            const acceptCallBtn = document.getElementById("accept-call-btn");

            acceptCallBtn.addEventListener('click', () => {
                videoCallContainer.style.display = 'flex';
            });

            rejectCallBtn.addEventListener('click', () => {
                videoCallContainer.style.display = 'none';
                // Optionally send rejection to the server
            });

            endCallBtn.addEventListener('click', () => {
                videoCallContainer.style.display = 'none';
                // Optionally send end call to the server
            });
        </script> -->

    </body>
    </html>
